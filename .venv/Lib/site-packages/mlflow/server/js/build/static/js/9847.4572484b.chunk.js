/*! For license information please see 9847.4572484b.chunk.js.LICENSE.txt */
(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[9847],{16333:function(e,t,n){"use strict";n.d(t,{Ld:function(){return a.L},ad:function(){return o.a}});n(37750);var o=n(44072),a=n(38815)},29774:function(e,t,n){"use strict";n.d(t,{Au:function(){return s},tF:function(){return l}});var o=n(46709),a=n(36476),i=n(73408);const r=(0,o.createContext)({currentUserActionError:null,handleError:()=>{},handlePromise:()=>{},clearUserActionError:()=>{}}),s=({children:e,errorFilter:t})=>{const[n,s]=(0,o.useState)(null),l=(0,o.useCallback)(((e,n)=>{if(null===t||void 0===t||!t(e)){const t=(0,a.a$)(e);s(t),n&&n(t)}}),[s,t]),d=(0,o.useCallback)((e=>{e.catch((e=>{l(e)}))}),[l]),c=(0,o.useCallback)((()=>{s(null)}),[s]);return(0,i.Y)(r.Provider,{value:(0,o.useMemo)((()=>({currentUserActionError:n,handleError:l,handlePromise:d,clearUserActionError:c})),[c,n,l,d]),children:e})},l=()=>{const{currentUserActionError:e,handleError:t,handlePromise:n,clearUserActionError:a}=(0,o.useContext)(r),i=(0,o.useCallback)(((e,n,o)=>{t(n,o)}),[t]);return(0,o.useMemo)((()=>({currentUserActionError:e,handleError:t,handleErrorWithEvent:i,handlePromise:n,clearUserActionError:a})),[a,t,n,e,i])}},29847:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ye}});var o=n(68248),a=n(27757),i=n(25637),r=n(42595),s=n(46709),l=n(91105),d=n(59930),c=n.n(d),u=n(27299),m=n(66916),p=n(42747),h=n(43617),g=n(90061),f=n(76256),v=n(72607),w=n(73408);var x={name:"y1ecum",styles:"text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex-shrink:1"};var b=n(79081),y=n(11522);var Y=n(40724),S=n(34599),C=n(61077),D=n(39595),M=n(61060);var I={name:"1hcx8jb",styles:"padding:0"},T={name:"1r962iv",styles:"padding:4px"};var R=n(16333);var _={name:"1tzoh5y",styles:"width:fit-content;max-width:100%;cursor:pointer"},P={name:"hdknak",styles:"display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap"};var z=n(76118),A=n(52849),k=n(32874);const E="dataset_id",F="name",L="last_update_time",H="actions",N=[E,F,L,H],O=[H],K=[{id:E,accessorKey:"dataset_id",header:"Dataset ID",enableSorting:!1,cell:({row:e})=>{const t=e.original.dataset_id,{copy:n,tooltipOpen:o,tooltipMessage:a,handleTooltipOpenChange:i}=(0,R.Ld)(t,"Click to copy");return(0,w.Y)(b.T,{content:a,open:o,onOpenChange:i,componentId:"mlflow.eval-datasets.dataset-id-tooltip",children:(0,w.Y)(u.Tag,{css:_,componentId:"mlflow.eval-datasets.dataset-id",color:"indigo",onClick:n,children:(0,w.Y)("span",{css:P,children:t})})})}},{id:F,accessorKey:"name",header:"Name",enableSorting:!0,cell:({row:e})=>{const{theme:t}=(0,a.u)();return(0,w.Y)("div",{css:(0,o.AH)({overflow:"hidden",display:"flex",alignItems:"center",gap:t.spacing.xs},""),children:(0,w.Y)(a.T.Link,{css:x,componentId:"mlflow.eval-datasets.dataset-name-cell",children:e.original.name})})}},{id:L,accessorKey:"last_update_time",accessorFn:e=>e.last_update_time?new Date(e.last_update_time).getTime():0,header:"Updated At",enableSorting:!0,size:150,maxSize:150,cell:({row:e})=>e.original.last_update_time?(0,w.Y)(b.T,{content:new Date(e.original.last_update_time).toLocaleString(),componentId:"mlflow.eval-datasets.last-updated-cell-tooltip",children:(0,w.Y)("span",{children:y.A.timeSinceStr(e.original.last_update_time)})}):(0,w.Y)("span",{children:"-"})},{id:"created_time",accessorKey:"created_time",accessorFn:e=>e.created_time?new Date(e.created_time).getTime():0,header:"Created At",enableSorting:!0,cell:({row:e})=>new Date(e.original.created_time).toLocaleString()},{id:"created_by",accessorKey:"created_by",header:"Created By",enableSorting:!0},{id:"source_type",accessorKey:"source_type",header:"Source Type",enableSorting:!0},{id:"actions",header:"",enableSorting:!1,size:36,maxSize:36,cell:({row:e})=>{const t=(0,D.jE)(),{deleteEvaluationDatasetMutation:n,isLoading:o}=(({onSuccess:e,onError:t})=>{const n=(0,D.jE)(),{mutate:o,isLoading:a}=(0,M.n)({mutationFn:async({datasetId:e})=>{await(0,C.ff)((0,C.we)(`ajax-api/3.0/mlflow/datasets/${e}`),"DELETE")},onSuccess:()=>{n.invalidateQueries({queryKey:[S.P4]}),null===e||void 0===e||e()},onError:e=>{null===t||void 0===t||t(e)}});return{deleteEvaluationDatasetMutation:o,isLoading:a}})({onSuccess:()=>{t.invalidateQueries({queryKey:[S.P4]})}}),i=(0,s.useCallback)((()=>{n({datasetId:e.original.dataset_id})}),[n,e]);return(0,w.Y)(u.TableRowAction,{css:I,children:(0,w.FD)(u.DropdownMenu.Root,{children:[(0,w.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,w.Y)(a.B,{componentId:"mlflow.eval-datasets.dataset-actions-menu",size:"small",icon:(0,w.Y)(u.OverflowIcon,{}),"aria-label":"Dataset actions",css:T})}),(0,w.Y)(u.DropdownMenu.Content,{align:"end",children:(0,w.FD)(u.DropdownMenu.Item,{componentId:"mlflow.eval-datasets.delete-dataset-menu-option",disabled:o,onClick:e=>{e.stopPropagation(),e.preventDefault(),i()},children:[(0,w.Y)(u.DropdownMenu.IconWrapper,{children:(0,w.Y)(u.TrashIcon,{})}),(0,w.Y)(Y.A,{id:"cMRvTA",defaultMessage:"Delete dataset"}),o&&(0,w.Y)(u.DropdownMenu.HintColumn,{children:(0,w.Y)(a.S,{})})]})})]})})}}],B=s.memo((({row:e,isActive:t,setSelectedDataset:n})=>{const{theme:i}=(0,a.u)();return(0,w.Y)(u.TableRow,{className:"eval-datasets-table-row",onClick:()=>{n(e.original)},children:e.getVisibleCells().map((e=>(0,w.Y)(u.TableCell,{css:(0,o.AH)({backgroundColor:t?i.colors.actionDefaultBackgroundHover:"transparent",width:e.column.columnDef.size?`${e.column.columnDef.size}px`:"auto",maxWidth:e.column.columnDef.maxSize?`${e.column.columnDef.maxSize}px`:"auto",minWidth:e.column.columnDef.minSize?`${e.column.columnDef.minSize}px`:"auto",..."actions"===e.column.id&&{paddingLeft:0,paddingRight:0}},""),children:(0,h.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)}),((e,t)=>e.isActive===t.isActive&&(0,z.isEqual)(e.columnVisibility,t.columnVisibility)));var j={name:"10jtkcq",styles:"display:flex;flex-direction:column;width:100%;height:100%"},$={name:"82a6rk",styles:"flex:1"},q={name:"1jrb16",styles:"flex:1;min-height:0;position:relative"},U={name:"13udsys",styles:"height:100%"};const V=({experimentId:e,selectedDataset:t,setSelectedDataset:n,setIsLoading:i})=>{const r=(0,p.tz)(),{theme:l}=(0,a.u)(),[d,c]=(0,s.useState)([{id:"created_time",desc:!0}]),[x,b]=(0,s.useState)(K.reduce(((e,t)=>{var n,o;return e[null!==(n=t.id)&&void 0!==n?n:""]=N.includes(null!==(o=t.id)&&void 0!==o?o:""),e}),{})),[y,Y]=(0,s.useState)(""),[S,C]=(0,s.useState)(y),{data:D,isLoading:M,isFetching:I,error:T,refetch:R,fetchNextPage:_,hasNextPage:P}=(0,v.J)({experimentId:e,nameFilter:y}),z=(0,f.L)("mlflow/server/js/src/experiment-tracking/pages/experiment-evaluation-datasets/components/ExperimentEvaluationDatasetsListTable.tsx",{columns:K,data:null!==D&&void 0!==D?D:[],getCoreRowModel:(0,g.HT)(),getRowId:e=>e.dataset_id,enableSorting:!0,onSortingChange:c,getSortedRowModel:(0,g.h5)(),enableColumnResizing:!1,state:{sorting:d,columnVisibility:x}}),E=(0,A.v)({isFetching:I,hasNextPage:null!==P&&void 0!==P&&P,fetchNextPage:_});if((0,s.useEffect)((()=>{i(M)}),[M,i]),null!==D&&void 0!==D&&D.length||n(void 0),!t||!D.some((e=>e.dataset_id===t.dataset_id))){const e=z.getRowModel().rows;e.length>0&&n(e[0].original)}return T?(0,w.Y)("div",{children:"Error loading datasets"}):(0,w.FD)("div",{css:j,children:[(0,w.FD)("div",{css:(0,o.AH)({display:"flex",gap:l.spacing.sm,alignItems:"center",marginBottom:l.spacing.sm},""),children:[(0,w.Y)(m.I,{allowClear:!0,placeholder:"Search by dataset name",value:S,onChange:e=>{C(e.target.value),e.target.value||Y(e.target.value)},onClear:()=>{C(""),Y("")},onPressEnter:()=>Y(S),componentId:"mlflow.eval-datasets.search-input",css:$,prefix:(0,w.Y)(m.S,{})}),(0,w.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",marginRight:l.spacing.sm},""),children:[(0,w.Y)(a.B,{icon:(0,w.Y)(u.RefreshIcon,{}),disabled:I,onClick:()=>R(),componentId:"mlflow.eval-datasets.table-refresh-button"}),(0,w.FD)(u.DropdownMenu.Root,{children:[(0,w.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,w.Y)(a.B,{icon:(0,w.Y)(u.ColumnsIcon,{}),componentId:"mlflow.eval-datasets.table-column-selector-button"})}),(0,w.Y)(u.DropdownMenu.Content,{children:K.map((e=>{var t,n,o,i;return!O.includes(null!==(t=e.id)&&void 0!==t?t:"")&&(0,w.FD)(u.DropdownMenu.CheckboxItem,{componentId:"mlflow.eval-datasets.table-column-selector-checkbox",checked:null!==(o=x[null!==(i=e.id)&&void 0!==i?i:""])&&void 0!==o&&o,onCheckedChange:t=>{var n;return b({...x,[null!==(n=e.id)&&void 0!==n?n:""]:t})},children:[(0,w.Y)(u.DropdownMenu.ItemIndicator,{}),(0,w.Y)(a.T.Text,{children:e.header})]},null!==(n=e.id)&&void 0!==n?n:"")}))})]})]})]}),(0,w.Y)(k.Z,{experimentId:e}),(0,w.Y)("div",{css:q,children:(0,w.FD)(u.Table,{css:U,empty:M||I||0!==D.length?void 0:(0,w.Y)(u.Empty,{description:r.formatMessage({id:"F4K195",defaultMessage:"No evaluation datasets found"})}),onScroll:e=>E(e.currentTarget),scrollable:!0,children:[(0,w.Y)(u.TableRow,{isHeader:!0,children:z.getLeafHeaders().map((e=>(0,w.Y)(u.TableHeader,{sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted(),onToggleSort:e.column.getToggleSortingHandler(),componentId:"mlflow.eval-datasets.column-header",header:e,column:e.column,css:(0,o.AH)({width:e.column.columnDef.size?`${e.column.columnDef.size}px`:"auto",maxWidth:e.column.columnDef.maxSize?`${e.column.columnDef.maxSize}px`:"auto",minWidth:e.column.columnDef.minSize?`${e.column.columnDef.minSize}px`:"auto",cursor:e.column.getCanSort()?"pointer":"default"},""),children:(0,h.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),!M&&z.getRowModel().rows.map((e=>(0,w.Y)(B,{row:e,columnVisibility:x,isActive:e.original.dataset_id===(null===t||void 0===t?void 0:t.dataset_id),setSelectedDataset:n},e.id))),(M||I)&&(0,w.Y)(u.TableSkeletonRows,{table:z})]})})]})};var W=n(96584),J=n(181);var Q=n(7655);const G=({text:e,searchFilter:t,theme:n})=>{const a=(0,s.useMemo)((()=>{if(!t.trim())return[e];const a=new RegExp(`(${(0,z.escapeRegExp)(t)})`,"gi"),i=e.split(a),r=n.isDarkMode?n.colors.blue800:n.colors.blue100;return i.map(((e,n)=>e.toLowerCase()===t.toLowerCase()?(0,w.Y)("span",{css:(0,o.AH)({backgroundColor:r},""),children:e},n):e))}),[e,t,n]);return(0,w.Y)(w.FK,{children:a})},Z=({cell:e,table:{options:t}})=>{var n,i;const{theme:r}=(0,a.u)(),l=e.getValue(),d=void 0!==l?JSON.stringify(l,null,2):"",c=null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.rowSize,u=(null===t||void 0===t||null===(i=t.meta)||void 0===i?void 0:i.searchFilter)||"",m=(0,s.useMemo)((()=>d?d.split("\n").length:1),[d]);(0,s.useMemo)((()=>Math.min(Math.max(m+1,3),20)),[m]);return(0,w.Y)("div",{css:(0,o.AH)({overflow:"hidden",display:"flex",alignItems:"center",gap:r.spacing.xs,flex:1},""),children:"sm"===c?(0,w.Y)("code",{css:(0,o.AH)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:`${r.typography.fontSizeSm}px !important`,margin:"0 !important"},""),children:d}):(0,w.Y)("div",{css:(0,o.AH)({overflow:"auto",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",resize:"vertical",width:"100%",border:`1px solid ${r.colors.border}`,padding:r.spacing.xs,backgroundColor:r.colors.backgroundSecondary,fontSize:`${r.typography.fontSizeSm}px`,maxHeight:r.typography.fontSizeLg*("md"===c?10:20)},""),children:(0,w.Y)(G,{text:d,searchFilter:u,theme:r})})})};var X={name:"1cl2a0e",styles:"display:flex;align-items:flex-start;justify-content:space-between"},ee={name:"1ap1kl4",styles:"max-width:540px;flex:1"};const te=({dataset:e,datasetRecords:t,columns:n,columnVisibility:i,setColumnVisibility:r,rowSize:s,setRowSize:l,searchFilter:d,setSearchFilter:c})=>{const{theme:p}=(0,a.u)(),h=null===e||void 0===e?void 0:e.name,g=(e=>{var t;if(!e)return;const n=(0,J.pt)(e);return null!==(t=null===n||void 0===n?void 0:n.num_records)&&void 0!==t?t:void 0})(null===e||void 0===e?void 0:e.profile),f=t.length;return(0,w.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:p.spacing.sm,marginBottom:p.spacing.sm},""),children:[(0,w.FD)("div",{css:X,children:[(0,w.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",paddingLeft:p.spacing.sm,paddingRight:p.spacing.sm},""),children:[(0,w.Y)(a.T.Title,{level:3,withoutMargins:!0,children:h}),(0,w.Y)(a.T.Text,{color:"secondary",size:"sm",children:(0,w.Y)(Y.A,{id:"crmbMK",defaultMessage:"Displaying {loadedRecordsCount} of {totalRecordsCount, plural, =1 {1 record} other {# records}}",values:{loadedRecordsCount:null!==f&&void 0!==f?f:0,totalRecordsCount:null!==g&&void 0!==g?g:0}})})]}),(0,w.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"flex-start",gap:p.spacing.xs},""),children:[(0,w.FD)(u.DropdownMenu.Root,{children:[(0,w.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,w.Y)(a.B,{componentId:"mlflow.eval-datasets.records-toolbar.row-size-toggle",icon:(0,w.Y)(u.RowsIcon,{})})}),(0,w.Y)(u.DropdownMenu.Content,{align:"end",children:(0,w.FD)(u.DropdownMenu.RadioGroup,{componentId:"mlflow.eval-datasets.records-toolbar.row-size-radio",value:s,onValueChange:e=>l(e),children:[(0,w.Y)(u.DropdownMenu.Label,{children:(0,w.Y)(a.T.Text,{color:"secondary",children:(0,w.Y)(Y.A,{id:"DcGPfO",defaultMessage:"Row height"})})}),(0,w.FD)(u.DropdownMenu.RadioItem,{value:"sm",children:[(0,w.Y)(u.DropdownMenu.ItemIndicator,{}),(0,w.Y)(a.T.Text,{children:(0,w.Y)(Y.A,{id:"ZNyTjg",defaultMessage:"Small"})})]},"sm"),(0,w.FD)(u.DropdownMenu.RadioItem,{value:"md",children:[(0,w.Y)(u.DropdownMenu.ItemIndicator,{}),(0,w.Y)(a.T.Text,{children:(0,w.Y)(Y.A,{id:"fcIHyN",defaultMessage:"Medium"})})]},"md"),(0,w.FD)(u.DropdownMenu.RadioItem,{value:"lg",children:[(0,w.Y)(u.DropdownMenu.ItemIndicator,{}),(0,w.Y)(a.T.Text,{children:(0,w.Y)(Y.A,{id:"xgbeVS",defaultMessage:"Large"})})]},"lg")]})})]}),(0,w.FD)(u.DropdownMenu.Root,{children:[(0,w.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,w.Y)(a.B,{componentId:"mlflow.eval-datasets.records-toolbar.columns-toggle",icon:(0,w.Y)(u.ColumnsIcon,{})})}),(0,w.Y)(u.DropdownMenu.Content,{children:n.map((e=>{var t,n;return(0,w.FD)(u.DropdownMenu.CheckboxItem,{componentId:"mlflow.eval-datasets.records-toolbar.column-checkbox",checked:null!==(t=i[null!==(n=e.id)&&void 0!==n?n:""])&&void 0!==t&&t,onCheckedChange:t=>{var n;return r({...i,[null!==(n=e.id)&&void 0!==n?n:""]:t})},children:[(0,w.Y)(u.DropdownMenu.ItemIndicator,{}),(0,w.Y)(a.T.Text,{children:e.header})]},e.id)}))})]})]})]}),(0,w.Y)("div",{css:(0,o.AH)({paddingLeft:p.spacing.sm,paddingRight:p.spacing.sm},""),children:(0,w.Y)(m.I,{componentId:"mlflow.eval-datasets.records-toolbar.search-input",prefix:(0,w.Y)(m.S,{}),placeholder:"Search inputs and expectations",value:d,onChange:e=>c(e.target.value),css:ee})})]})};const ne="inputs",oe="outputs",ae="expectations",ie=[{id:ne,accessorKey:"inputs",header:"Inputs",enableResizing:!1,cell:Z},{id:oe,accessorKey:"outputs",header:"Outputs",enableResizing:!1,cell:Z},{id:ae,accessorKey:"expectations",header:"Expectations",enableResizing:!1,cell:Z}];var re={name:"1w4ngjc",styles:"flex:1;min-height:0;position:relative;overflow:hidden;display:flex;flex-direction:column"},se={name:"82a6rk",styles:"flex:1"},le={name:"1w2a2xb",styles:"position:sticky;top:0;z-index:1"};const de=({dataset:e})=>{const t=(0,Q.A)(),n=e.dataset_id,[o,a]=(0,s.useState)("md"),[i,r]=(0,s.useState)(""),[l,d]=(0,s.useState)({[ne]:!0,[oe]:!1,[ae]:!0}),{data:c,isLoading:m,isFetching:p,error:v,fetchNextPage:x,hasNextPage:b}=(({datasetId:e,enabled:t=!0})=>{const{data:n,fetchNextPage:o,hasNextPage:a,isLoading:i,isFetching:r,refetch:l,error:d}=(0,W.q)({queryKey:[S.uz,e],queryFn:async({queryKey:[,e],pageParam:t})=>{const n=new URLSearchParams;return n.set("dataset_id",e),n.set("max_results",50..toString()),t&&n.set("page_token",null!==t&&void 0!==t?t:""),await(0,C.ff)((0,C.we)(`ajax-api/3.0/mlflow/datasets/${e}/records?${n.toString()}`),"GET")},cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:t,getNextPageParam:e=>e.next_page_token});return{data:(0,s.useMemo)((()=>{var e;return null!==(e=null===n||void 0===n?void 0:n.pages.flatMap((e=>(0,J.pt)(e.records))))&&void 0!==e?e:[]}),[n]),fetchNextPage:o,hasNextPage:a,isLoading:i,isFetching:r,refetch:l,error:d}})({datasetId:null!==n&&void 0!==n?n:"",enabled:!!n}),y=(0,A.v)({isFetching:p,hasNextPage:null!==b&&void 0!==b&&b,fetchNextPage:x}),Y=(0,s.useMemo)((()=>{if(!i.trim())return null!==c&&void 0!==c?c:[];const e=i.toLowerCase();return(null!==c&&void 0!==c?c:[]).filter((t=>{if(JSON.stringify(t.inputs||{}).toLowerCase().includes(e))return!0;return!!JSON.stringify(t.expectations||{}).toLowerCase().includes(e)}))}),[c,i]);(0,s.useEffect)((()=>{if(!i.trim()||p||!b)return;const e="sm"===o?20:"md"===o?10:5;Y.length<e&&x()}),[Y.length,i,p,b,x,o]);const D=(0,f.L)("mlflow/server/js/src/experiment-tracking/pages/experiment-evaluation-datasets/components/ExperimentEvaluationDatasetRecordsTable.tsx",{columns:ie,data:Y,getCoreRowModel:(0,g.HT)(),getRowId:e=>e.dataset_record_id,enableColumnResizing:!1,meta:{rowSize:o,searchFilter:i},state:{columnVisibility:l}});return(0,w.FD)("div",{css:re,children:[(0,w.Y)(te,{dataset:e,datasetRecords:null!==c&&void 0!==c?c:[],columns:ie,columnVisibility:l,setColumnVisibility:d,rowSize:o,setRowSize:a,searchFilter:i,setSearchFilter:r}),(0,w.FD)(u.Table,{css:se,empty:m||0!==D.getRowModel().rows.length?void 0:(0,w.Y)(u.Empty,{description:t.formatMessage({id:"TnD/vL",defaultMessage:"No records found"})}),scrollable:!0,onScroll:e=>y(e.currentTarget),children:[(0,w.Y)(u.TableRow,{isHeader:!0,children:D.getLeafHeaders().map((e=>e.column.getIsVisible()&&(0,w.Y)(u.TableHeader,{componentId:"mlflow.eval-dataset-records.column-header",header:e,column:e.column,css:le,children:(0,h.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),D.getRowModel().rows.map((e=>(0,w.Y)(u.TableRow,{children:e.getVisibleCells().map((e=>(0,w.Y)(u.TableCell,{children:(0,h.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id))),(m||p)&&(0,w.Y)(u.TableSkeletonRows,{table:D})]})]})};var ce=n(29774),ue=n(89949);var me={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const pe=({error:e})=>{var t;return(0,w.Y)(u.PageWrapper,{css:me,children:(0,w.Y)(u.Empty,{"data-testid":"fallback",title:(0,w.Y)(Y.A,{id:"WtUqxc",defaultMessage:"Error"}),description:null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:(0,w.Y)(Y.A,{id:"9J8zoa",defaultMessage:"An error occurred while rendering this component."}),image:(0,w.Y)(a.k,{})})})},he=({children:e,resetKey:t})=>(0,w.Y)(ue.tH,{FallbackComponent:pe,resetKeys:[t],children:(0,w.Y)(ce.Au,{children:e})});var ge=n.p+"static/media/eval-datasets-empty.16c4b3426c8a8c4a9defc41bfb653504.svg";var fe={name:"xvginl",styles:"max-width:600px"};const ve=({experimentId:e})=>{const{theme:t}=(0,a.u)();return(0,w.FD)("div",{css:(0,o.AH)({display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",padding:t.spacing.md},""),children:[(0,w.Y)(a.T.Title,{level:3,color:"secondary",children:(0,w.Y)(Y.A,{id:"c1jD8u",defaultMessage:"Create an evaluation dataset"})}),(0,w.Y)(a.T.Paragraph,{color:"secondary",css:fe,children:(0,w.Y)(Y.A,{id:"BMUd0e",defaultMessage:"Create evaluation datasets in order to iteratively evaluate and improve your app. For example, build a dataset from production traces with negative feedback. {learnMoreLink}",values:{learnMoreLink:(0,w.Y)(a.T.Link,{componentId:"mlflow.eval-datasets.learn-more-link",href:"https://mlflow.org/docs/latest/genai/datasets/",openInNewTab:!0,children:(0,w.Y)(Y.A,{id:"izS5yQ",defaultMessage:"Learn more"})})}})}),(0,w.Y)("img",{css:(0,o.AH)({marginBottom:t.spacing.md,maxWidth:"min(100%, 600px)"},""),src:ge,alt:"No datasets found"}),(0,w.Y)(k.Z,{experimentId:e})]})};var we={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},xe={name:"n56zw6",styles:"display:flex;flex-direction:row;flex:1;min-height:0px"},be={name:"5ob2ly",styles:"display:flex;position:relative"};const ye=()=>{const{experimentId:e}=(0,l.g)(),{theme:t}=(0,a.u)(),[n,d]=(0,s.useState)(400),[u,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)(void 0),[v,x]=(0,s.useState)(!1);return c()(e,"Experiment ID must be defined"),(0,w.FD)("div",{css:xe,children:[(0,w.Y)(i.ResizableBox,{css:be,style:{flex:`0 0 ${p?0:n}px`},width:n,axis:"x",resizeHandles:["e"],minConstraints:[250,0],handle:(0,w.Y)(r.z,{runListHidden:p,updateRunListHidden:()=>{h(!p)}}),onResize:(e,{size:t})=>{p||d(t.width)},onResizeStart:()=>!p&&m(!0),onResizeStop:()=>m(!1),children:(0,w.Y)("div",{css:(0,o.AH)({display:p?"none":"flex",flex:1,minWidth:0},""),children:(0,w.Y)(V,{setIsLoading:x,experimentId:e,selectedDataset:g,setSelectedDataset:f})})}),(0,w.FD)("div",{css:(0,o.AH)({flex:1,display:"flex",borderLeft:`1px solid ${t.colors.border}`,minHeight:"0px",overflow:"hidden"},""),children:[!v&&!g&&(0,w.Y)(ve,{experimentId:e}),g&&(0,w.Y)(de,{dataset:g})]}),u&&(0,w.Y)(o.mL,{styles:we})]})};var Ye=()=>(0,w.Y)(he,{children:(0,w.Y)(ye,{})})},32874:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var o=n(27757),a=n(27299),i=n(46709),r=n(40724),s=n(79081),l=n(66916),d=n(42747),c=n(61077),u=n(39595),m=n(61060),p=n(34599);var h=n(73408);const g=({visible:e,experimentId:t,onCancel:n})=>{const o=(0,d.tz)(),[r,g]=(0,i.useState)(""),[f,v]=(0,i.useState)(""),{createEvaluationDatasetMutation:w,isLoading:x}=(({onSuccess:e,onError:t})=>{const n=(0,u.jE)(),{mutate:o,isLoading:a}=(0,m.n)({mutationFn:async({datasetName:e,experimentIds:t})=>{const n={name:e,experiment_ids:t};return(await(0,c.ff)((0,c.we)("ajax-api/3.0/mlflow/datasets/create"),"POST",n)).dataset},onSuccess:()=>{n.invalidateQueries({queryKey:[p.P4]}),null===e||void 0===e||e()},onError:e=>{null===t||void 0===t||t(e)}});return{createEvaluationDatasetMutation:o,isLoading:a}})({onSuccess:()=>{n()}}),b=(0,i.useCallback)((()=>{r?w({datasetName:r,experimentIds:[t]}):v(o.formatMessage({id:"sbHChH",defaultMessage:"Dataset name is required"}))}),[w,t,r,o]);return(0,h.FD)(s.d,{componentId:"mlflow.create-evaluation-dataset-modal",visible:e,onCancel:n,okText:o.formatMessage({id:"creoEe",defaultMessage:"Create"}),cancelText:o.formatMessage({id:"nEnDEu",defaultMessage:"Cancel"}),onOk:b,okButtonProps:{loading:x,disabled:!r},title:(0,h.Y)(d.sA,{id:"287Ack",defaultMessage:"Create evaluation dataset"}),children:[(0,h.Y)(a.FormUI.Label,{htmlFor:"dataset-name-input",children:(0,h.Y)(d.sA,{id:"xdFMIN",defaultMessage:"Dataset name"})}),(0,h.Y)(l.I,{componentId:"mlflow.create-evaluation-dataset-modal.dataset-name",id:"dataset-name-input",name:"name",type:"text",placeholder:o.formatMessage({id:"ZQpc2w",defaultMessage:"Enter dataset name"}),value:r,onChange:e=>{g(e.target.value),v("")}}),f&&(0,h.Y)(a.FormUI.Message,{type:"error",message:f})]})};var f={name:"b9l38d",styles:"width:min-content"};const v=({experimentId:e})=>{const[t,n]=(0,i.useState)(!1);return(0,h.FD)(h.FK,{children:[(0,h.Y)(o.B,{componentId:"mlflow.eval-datasets.create-dataset-button",css:f,icon:(0,h.Y)(a.DatabaseIcon,{}),onClick:()=>n(!0),children:(0,h.Y)(r.A,{id:"N7BCue",defaultMessage:"Create dataset"})}),(0,h.Y)(g,{experimentId:e,visible:t,onCancel:()=>n(!1)})]})}},34599:function(e,t,n){"use strict";n.d(t,{P4:function(){return a},lA:function(){return i},uz:function(){return o}});const o="GET_DATASET_RECORDS",a="SEARCH_EVALUATION_DATASETS",i="FETCH_TRACES"},37750:function(e,t,n){"use strict";n(46709),n(44072)},38815:function(e,t,n){"use strict";n.d(t,{L:function(){return d}});var o=n(46709),a=n(72801),i=n(79081),r=n(27299),s=n(42747),l=n(73408);function d(e,t,n){const d=(0,s.tz)(),c=t||d.formatMessage({id:"hBAhI8",defaultMessage:"Copy"}),u=d.formatMessage({id:"g4hHzO",defaultMessage:"Copied"}),m=(0,a.useClipboard)(),p=(0,o.useRef)(),[h,g]=(0,o.useState)(!1),[f,v]=(0,o.useState)(!1);(0,o.useEffect)((()=>()=>{window.clearTimeout(p.current)}),[]);return{actionIcon:h?(0,l.Y)(i.C,{}):(0,l.Y)(r.CopyIcon,{}),tooltipMessage:h?u:c,copy:()=>{m.copy(e),window.clearTimeout(p.current),g(!0),null===n||void 0===n||n(),p.current=window.setTimeout((()=>{g(!1)}),3e3)},copied:h,ariaLabel:c,tooltipOpen:f||h,handleTooltipOpenChange:v}}},42595:function(e,t,n){"use strict";n.d(t,{t:function(){return u},z:function(){return m}});var o=n(68248),a=n(27757),i=n(46709),r=n(25637),s=n(52572),l=n(73408);var d={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},c={name:"5ob2ly",styles:"display:flex;position:relative"};const u=({runListHidden:e,width:t,onResize:n,children:a,onHiddenChange:u,maxWidth:p})=>{const h=(0,s.e)(),[g,f]=(0,i.useState)(!1);return(0,l.FD)(l.FK,{children:[(0,l.Y)(r.ResizableBox,{css:c,style:{flex:`0 0 ${e?0:t}px`},width:t,axis:"x",resizeHandles:["e"],minConstraints:[250,0],maxConstraints:void 0===p?void 0:[p,0],handle:(0,l.Y)(m,{runListHidden:e,updateRunListHidden:e=>{u?u(e):h((t=>({...t,runListHidden:e})))}}),onResize:(t,{size:o})=>{e||n(o.width)},onResizeStart:()=>!e&&f(!0),onResizeStop:()=>f(!1),children:a}),g&&(0,l.Y)(o.mL,{styles:d})]})},m=i.forwardRef((({updateRunListHidden:e,runListHidden:t,...n},i)=>{const{theme:r}=(0,a.u)();return(0,l.FD)("div",{ref:i,...n,css:(0,o.AH)({transition:"opacity 0.2s",width:0,overflow:"visible",height:"100%",position:"relative",zIndex:10,display:"flex",opacity:t?1:0,"&:hover":{opacity:1,".bar":{opacity:1},".button":{border:`2px solid ${r.colors.actionDefaultBorderHover}`}}},""),children:[(0,l.Y)("div",{css:(0,o.AH)({position:"absolute",left:-r.general.iconSize/2,width:r.general.iconSize,cursor:t?void 0:"ew-resize",height:"100%",top:0,bottom:0},""),children:(0,l.Y)("div",{className:"button",css:(0,o.AH)({top:"50%",transition:"border-color 0.2s",position:"absolute",width:r.general.iconSize,height:r.general.iconSize,backgroundColor:r.colors.backgroundPrimary,borderRadius:r.general.iconSize,overflow:"hidden",border:`1px solid ${r.colors.border}`,display:"flex",alignItems:"center",justifyContent:"center",zIndex:11},""),children:(0,l.Y)(a.B,{componentId:"mlflow.experiment_page.table_resizer.collapse",onClick:()=>e(!t),icon:t?(0,l.Y)(a.o,{}):(0,l.Y)(a.n,{}),size:"small"})})}),(0,l.Y)("div",{className:"bar",css:(0,o.AH)({position:"absolute",opacity:0,left:-1.5,width:3,height:"100%",top:0,bottom:0,backgroundColor:r.colors.actionPrimaryBackgroundDefault},"")})]})}))},42747:function(e,t,n){"use strict";n.d(t,{sA:function(){return o.sA},tz:function(){return o.tz},zR:function(){return o.zR}});var o=n(77680);n(13584)},44072:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});n(46709);var o=n(27757),a=n(79081),i=n(38815),r=n(73408);function s({buttonProps:e,componentId:t,copyText:n,copyTooltip:s,isInsideInputGroup:l=!1,onCopy:d,tooltipProps:c}){const{actionIcon:u,copy:m,handleTooltipOpenChange:p,tooltipOpen:h,tooltipMessage:g}=(0,i.L)(n,s,d),f=(0,r.Y)(o.B,{"aria-label":g,componentId:null!==t&&void 0!==t?t:"codegen_web-shared_src_copy_copyactionbutton.tsx_17",icon:u,onClick:m,size:"small",...e}),v=(0,r.Y)(o.B,{"aria-label":g,componentId:null!==t&&void 0!==t?t:"codegen_web-shared_src_copy_copyactionbutton.tsx_17",onClick:m,...e,children:u});return(0,r.Y)(a.T,{componentId:t?`${t}-tooltip`:"codegen_web-shared_src_copy_copyactionbutton.tsx_17-tooltip",content:g,onOpenChange:p,open:h,...c,children:l?v:f})}},52572:function(e,t,n){"use strict";n.d(t,{e:function(){return s},i:function(){return r}});var o=n(46709),a=n(73408);const i=o.createContext((e=>e)),r=({children:e,setUIState:t})=>(0,a.Y)(i.Provider,{value:t,children:e}),s=()=>o.useContext(i)},52849:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var o=n(46709);const a=({isFetching:e,hasNextPage:t,fetchNextPage:n})=>(0,o.useCallback)((o=>{if(o){const{scrollHeight:a,scrollTop:i,clientHeight:r}=o;a-i-r<200&&!e&&t&&n()}}),[n,e,t])},59930:function(e){"use strict";e.exports=function(e,t,n,o,a,i,r,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,o,a,i,r,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},72607:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var o=n(96584),a=n(61077),i=n(46709),r=n(34599);const s=({experimentId:e,enabled:t=!0,nameFilter:n=""})=>{const{data:s,fetchNextPage:l,hasNextPage:d,isLoading:c,isFetching:u,refetch:m,error:p}=(0,o.q)({queryKey:[r.P4,e,n],queryFn:async({queryKey:[,e,t],pageParam:n})=>{const o={experiment_ids:[e],filter_string:t?`name ILIKE '%${t}%'`:void 0,order_by:["created_time DESC"],max_results:50,page_token:n};return await(0,a.ff)((0,a.we)("ajax-api/3.0/mlflow/datasets/search"),"POST",o)},cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:t,getNextPageParam:e=>e.next_page_token});return{data:(0,i.useMemo)((()=>{var e;return null!==(e=null===s||void 0===s?void 0:s.pages.flatMap((e=>{var t;return null!==(t=e.datasets)&&void 0!==t?t:[]})))&&void 0!==e?e:[]}),[s]),fetchNextPage:l,hasNextPage:d,isLoading:c,isFetching:u,refetch:m,error:p}}},72801:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useClipboard=void 0;var a=o(n(90606)),i=n(46709),r=n(81619);function s(e){return e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName)}t.useClipboard=function(e){void 0===e&&(e={});var t=r.useTimedToggle(!1),n=t[0],o=t[1],l=i.useRef(null),d=i.useRef(e);return d.current=e,{copied:n,copy:i.useCallback((function(e){var t=d.current,n=l.current;function i(){t.onSuccess&&t.onSuccess(),t.copiedTimeout&&o(t.copiedTimeout),t.selectOnCopy&&s(n)&&n.select()}function r(){t.onError&&t.onError(),!1!==t.selectOnError&&s(n)&&n.select()}function c(e){a.default(e).then(i).catch(r)}"string"===typeof e?c(e):n&&c(n.value)}),[]),isSupported:function(){return!!navigator.clipboard||"function"===typeof document.execCommand&&"function"===typeof document.queryCommandSupported&&document.queryCommandSupported("copy")},target:l}}},76256:function(e,t,n){"use strict";n.d(t,{L:function(){return a},S:function(){return i}});var o=n(43617);function a(e,t){return(0,o.N4)(t)}const i=o.N4},81619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTimedToggle=void 0;var o=n(46709);t.useTimedToggle=function(e){var t=o.useState(!1),n=t[0],a=t[1],i=o.useRef(),r=o.useRef(e);return o.useEffect((function(){return function(){return clearTimeout(i.current)}}),[]),[n,function(e){clearTimeout(i.current),a(!r.current),i.current=window.setTimeout((function(){return a(r.current)}),e)}]}},90606:function(e){e.exports=function(e){if(navigator.clipboard)return navigator.clipboard.writeText(e).catch((function(e){throw void 0!==e?e:new DOMException("The request is not allowed","NotAllowedError")}));var t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",t.style.webkitUserSelect="auto",t.style.userSelect="all",document.body.appendChild(t);var n=window.getSelection(),o=window.document.createRange();n.removeAllRanges(),o.selectNode(t),n.addRange(o);var a=!1;try{a=window.document.execCommand("copy")}catch(i){console.log("error",i)}return n.removeAllRanges(),window.document.body.removeChild(t),a?Promise.resolve():Promise.reject(new DOMException("The request is not allowed","NotAllowedError"))}},96584:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var o=n(56606),a=n(23403),i=n(60783);class r extends a.${constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,i.PL)()},t)}getOptimisticResult(e){return e.behavior=(0,i.PL)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,o,a,r,s,l;const{state:d}=e,c=super.createResult(e,t),{isFetching:u,isRefetching:m}=c,p=u&&"forward"===(null==(n=d.fetchMeta)||null==(o=n.fetchMore)?void 0:o.direction),h=u&&"backward"===(null==(a=d.fetchMeta)||null==(r=a.fetchMore)?void 0:r.direction);return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,i.rB)(t,null==(s=d.data)?void 0:s.pages),hasPreviousPage:(0,i.RQ)(t,null==(l=d.data)?void 0:l.pages),isFetchingNextPage:p,isFetchingPreviousPage:h,isRefetching:m&&!p&&!h}}}var s=n(93769);function l(e,t,n){const a=(0,o.vh)(e,t,n);return(0,s.t)(a,r)}}}]);